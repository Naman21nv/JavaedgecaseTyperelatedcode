/**
 * Sliding Window Technique: Finds maximum sum of subarray of size K.
 * 
 * TCS NQT Question Format:
 * "Given an array and an integer K, find the maximum sum of K consecutive elements.
 *  Example: arr[] = {2,1,5,1,3,2}, K = 3
 *  Output: 9 (subarray {5,1,3})"
 * 
 * Handles edge cases: K > array length, K <= 0, empty array, single element.
 */

public class MaxSumSubarrayK {

    public static void main(String[] args) {

        int[] arr = {2, 1, 5, 1, 3, 2};
        int k = 3;
        
        // Edge case: Null or empty array
        if (arr == null || arr.length == 0) {
            System.out.println("Array is empty or null");
            return;
        }
        
        // Edge case: K is invalid (<=0 or > array length)
        if (k <= 0 || k > arr.length) {
            System.out.println("Invalid K value. Must be 1 <= K <= " + arr.length);
            return;
        }
        
        // Edge case: K equals array length (return sum of all elements)
        if (k == arr.length) {
            int totalSum = 0;
            for (int num : arr) {
                totalSum += num;
            }
            System.out.println("Max Sum = " + totalSum);
            return;
        }
        
        // Sliding Window Technique - Time: O(n), Space: O(1)
        
        // Step 1: Calculate sum of first K elements (initial window)
        int windowSum = 0;
        for (int i = 0; i < k; i++) {
            windowSum += arr[i];
        }
        
        int maxSum = windowSum;  // Initialize max with first window sum
        
        // Step 2: Slide the window by removing leftmost, adding rightmost element
        for (int i = k; i < arr.length; i++) {
            
            // Remove element going out of window (arr[i-k])
            // Add new element entering window (arr[i])
            windowSum += arr[i] - arr[i - k];
            
            // Update maximum if current window sum is greater
            maxSum = Math.max(maxSum, windowSum);
        }
        
        System.out.println("Max Sum = " + maxSum);
    }
}

/*
 * TCS NQT QUESTION VARIATIONS:
 * 
 * 1. Basic: "Find maximum sum of K consecutive elements"
 * 2. With Index: "Find starting index of subarray with maximum sum of size K"
 * 3. Print Subarray: "Print the K consecutive elements with maximum sum"
 * 4. Minimum Sum: "Find minimum sum of K consecutive elements"
 * 5. Average: "Find maximum average of K consecutive elements"
 * 
 * ALGORITHM EXPLANATION - SLIDING WINDOW:
 * 
 * Instead of calculating sum of every K-element window from scratch (O(n*k)),
 * we slide the window by:
 * - Removing the leftmost element
 * - Adding the new rightmost element
 * This takes O(n) time.
 * 
 * EXAMPLE WALKTHROUGH: arr = {2,1,5,1,3,2}, K = 3
 * 
 * Step 1: Calculate first window sum
 * Window: [2,1,5] -> windowSum = 8, maxSum = 8
 * 
 * Step 2: Slide window right
 * i=3: Remove arr[0]=2, Add arr[3]=1 -> Window: [1,5,1] -> windowSum = 8, maxSum = 8
 * i=4: Remove arr[1]=1, Add arr[4]=3 -> Window: [5,1,3] -> windowSum = 9, maxSum = 9 âœ“
 * i=5: Remove arr[2]=5, Add arr[5]=2 -> Window: [1,3,2] -> windowSum = 6, maxSum = 9
 * 
 * Answer: 9 (subarray {5,1,3})
 */
